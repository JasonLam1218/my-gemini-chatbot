# my-gemini-chatbot

A full-stack AI chatbot web application powered by Google Gemini AI, with persistent chat memory, PDF upload and summarization, and Vercel KV storage. Designed for serverless deployment on Vercel.

---

## Features

### 1. Conversational AI Chatbot
- Uses Google Gemini AI (via `@google/generative-ai`) to generate context-aware responses.
- Remembers conversation history per user and session for personalized, ongoing chats.
- Supports clearing and restoring chat history.

### 2. PDF Upload and Summarization
- Users can upload PDF files (up to 10MB, 50 pages max per upload).
- Extracts and stores the full text from the PDF using `pdfjs-dist` in a serverless Node.js environment.
- Automatically generates a concise, multi-paragraph summary of the PDF using Gemini AI.
- Both the full text and summary are stored and can be referenced in future chat interactions.

### 3. Persistent Storage
- Uses Vercel KV for:
  - Storing chat history (per user/session)
  - Storing extracted PDF text and AI-generated summaries
- All data is set to expire after 7 days for privacy and storage efficiency.

### 4. Modern Frontend
- Clean, responsive UI with chat bubbles, message input, and clear/upload buttons.
- PDF upload is integrated with user feedback and error handling.
- All interactions are asynchronous and non-blocking for a smooth user experience.

### 5. Robust Error Handling
- All backend endpoints return JSON responses, even for errors, to ensure frontend stability.
- Handles file size/type validation, PDF parsing errors, and storage issues gracefully.
- CORS and preflight requests are supported for cross-origin deployments.

### 6. Serverless and Scalable
- All backend logic is implemented as Vercel serverless functions (`api/` directory).
- No server management required; scales automatically with usage.

---

## Technical Concepts & Architecture

### A. AI Integration
- Uses Google Gemini AI via the official SDK for both chat and PDF summarization.
- Chat prompts are dynamically constructed to include PDF content and summaries when available, giving the AI full context.
- Summarization prompt is carefully crafted to produce concise, informative results.

### B. PDF Text Extraction
- Utilizes `pdfjs-dist` (legacy build) for reliable PDF parsing in Node.js.
- Processes up to 50 pages per upload for performance and cost control.
- Extracted text is cleaned, truncated (max 500KB), and stored for later use.

### C. Persistent Memory
- Each user/session is assigned a unique ID (stored in `localStorage` on the frontend).
- Chat history and PDF data are stored in Vercel KV with keys based on user/session.
- On page load, previous chat history is loaded and displayed.

### D. PDF Summarization and Conversation History
- After PDF upload, the backend generates a summary using Gemini AI and stores it alongside the full text.
- The summary is also injected into the chat history, so users can immediately see and reference it.
- All chat and PDF interactions are limited to the last 50 messages for efficiency.

### E. Error Handling & Validation
- All API endpoints validate input (file type, size, session ID, etc.).
- Errors are logged and returned as JSON with clear messages for the frontend.
- CORS headers and preflight handling ensure compatibility with modern browsers and deployments.

### F. Deployment & Scalability
- Designed for Vercel serverless deployment (see `vercel.json`).
- All dependencies are listed in `package.json` (ensure `pdfjs-dist` and `@google/generative-ai` are installed).
- No stateful server required; all state is managed via Vercel KV and client-side storage.

---

## Getting Started

1. **Install dependencies:**
   ```sh
   npm install
   ```
2. **Set up environment variables:**
   - Add your Gemini API key as `GEMINI_API_KEY` in your environment (Vercel dashboard or `.env` for local testing).
3. **Deploy to Vercel:**
   - Push your code to a GitHub repo and import it into Vercel, or use `vercel` CLI.
4. **Use the App:**
   - Open the deployed site, start chatting, and upload PDFs for instant AI-powered summaries and Q&A.

---

## File Structure

- `index.html` — Main frontend UI
- `script.js` — Frontend logic (chat, PDF upload, UI)
- `api/chatbot.js` — Chatbot backend (handles chat, memory, PDF context)
- `api/upload-pdf.js` — PDF upload, extraction, summarization, and storage
- `style.css` — App styling
- `vercel.json` — Vercel serverless config

---

## Security & Privacy
- Uploaded PDFs and chat history are stored for 7 days, then automatically deleted.
- No data is shared with third parties except for Gemini AI processing.
- All communication is over HTTPS (enforced by Vercel).

---

## Limitations & Future Improvements
- Only text-based PDFs are supported (scanned/image-only PDFs will not extract text).
- Summaries are generated by AI and may not capture every detail.
- Large PDFs are truncated for performance.
- Future: Add support for PDF preview, user authentication, and more advanced document Q&A.

---

## License
MIT